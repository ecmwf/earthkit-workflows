members: 5
parameters:
  rain:
    targets: 
      out_prob: "fileset:cascade_prob_{param}.grib"
    windows:
      - window_operation: 'diff'
        include_start_step: True
        periods:
          - range: [0, 24, 24]
          - range: [12, 36, 24]
        thresholds:
          - out_paramid: 131060
            comparison: ">="
            value: 0.001
            localDecimalScaleFactor: 3
          - out_paramid: 131061
            comparison: ">="
            value: 0.005
            localDecimalScaleFactor: 3
        # grib_set:
        #   timeRangeIndicator: 5
        #   stepType: diff 
      - window_operation: 'diff'
        include_start_step: True
        periods:
          - range: [0, 24, 24]
          - range: [12, 36, 24]
        thresholds:
          - out_paramid: 131098 
            comparison: ">="
            value: 0.025
          - out_paramid: 131099
            comparison: ">="
            value: 0.05
        # grib_set:
        #   edition: 2
        #   indicatorOfUnitForTimeIncrement: 1
        #   packingType: grid_ccsds
        #   probabilityType: 3
        #   scaleFactorOfLowerLimit: 0
        #   scaleFactorOfUpperLimit: MISSING
        #   scaledValueOfUpperLimit: MISSING
        #   stepRange: 0-0
        #   stepType: accum
        #   timeIncrement: 12
        #   typeOfGeneratingProcess: 5
    sources:
      ens:
        class: od
        stream: enfo
        type: pf
        levtype: sfc
        domain: g
        param: 228
        date: 20230914
        time: 12
        expver: "0001"
        source: fdb
  ff:
    targets: 
      out_prob: "fileset:cascade_prob_{param}.grib"
    input_combine_operation: 'norm'
    windows:
      - periods:
          - range: [12, 12]
          - range: [24, 24]
        thresholds:
          - out_paramid: 131068
            comparison: ">="
            value: 10
          - out_paramid: 131069
            comparison: ">="
            value: 15
    sources:
      ens:
        class: od
        stream: enfo
        type: pf
        levtype: sfc
        domain: g
        param: [165, 166]
        date: 20230914
        time: 12
        expver: "0001"
        source: fdb
  mn2t6:
    targets: 
      out_prob: "fileset:cascade_prob_{param}.grib"
    steps:
      - interval: 6
        start_step: 126
        end_step: 240
    windows:
      - window_operation: minimum
        periods:
          - range: [120, 168]
          - range: [120, 240]
          - range: [168, 240]
        thresholds:
        - out_paramid: 131073
          comparison: "<="
          value: 273.15
          localDecimalScaleFactor: 2
    sources:
      ens:
        class: od
        stream: enfo
        type: pf
        levtype: sfc
        domain: g
        param: 122
        date: 20230914
        time: 12
        expver: "0001"
        source: fdb